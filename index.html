<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meeting Cost Calculator</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app" id="app">
    <header class="header">
      <div>
        <div class="eyebrow">Productivity Toolkit</div>
        <h1>üí∏ Meeting Cost Calculator</h1>
        <p class="subhead">Understand the real-time cost of meetings and optimize your team‚Äôs time.</p>
      </div>
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <span class="theme-toggle-track">
          <span class="theme-toggle-thumb"></span>
          <span class="theme-icon sun">‚òÄÔ∏è</span>
          <span class="theme-icon moon">üåô</span>
        </span>
      </button>
    </header>

    <nav class="view-nav" aria-label="Views">
      <button class="view-tab active" data-view="view-calculator">Calculator</button>
      <button class="view-tab" data-view="view-roi">Meeting ROI</button>
    </nav>

    <div id="view-calculator" class="view active">
      <section class="grid">
        <div class="card">
        <h2>Inputs</h2>
        <div class="form-group">
          <label for="duration">Planned meeting duration (minutes)</label>
          <input type="number" id="duration" min="1" value="30" />
        </div>
        <div class="form-group">
          <label for="recurring">Recurring?</label>
          <select id="recurring">
            <option value="one-off" selected>One-off</option>
            <option value="daily">Daily (x240)</option>
            <option value="weekly">Weekly (x50)</option>
            <option value="bi-weekly">Bi-weekly (x25)</option>
            <option value="monthly">Monthly (x12)</option>
          </select>
        </div>

        <div class="attendees">
          <div class="attendees-header">
            <h3>Attendees</h3>
            <button class="btn small" id="addRow">Add role</button>
          </div>
          <div class="quick-presets">
            <div class="quick-presets__label">Quick Presets</div>
            <div class="quick-presets__actions">
              <button class="preset-chip" data-preset="triad">Feature Crew</button>
              <button class="preset-chip" data-preset="spec-review">Spec Review</button>
              <button class="preset-chip" data-preset="leadership">Leadership Review</button>
              <button class="preset-chip" data-preset="all-hands">Team All Hands</button>
            </div>
          </div>
          <div id="attendeeRows"></div>
        </div>

        <div class="actions">
          <button class="btn primary" id="startBtn">Start Meeting</button>
          <button class="btn" id="resetBtn">Reset</button>
        </div>
      </div>

      <div class="card summary-card">
        <h2>Summary</h2>
        <div class="summary-grid">
          <div class="summary-item">
            <div class="label">Per Minute</div>
            <div class="value" id="perMinute">$0.00</div>
          </div>
          <div class="summary-item">
            <div class="label">Per Hour</div>
            <div class="value" id="perHour">$0.00</div>
          </div>
          <div class="summary-item">
            <div class="label">Planned Total</div>
            <div class="value" id="plannedTotal">$0.00</div>
          </div>
          <div class="summary-item annual-run-rate is-one-off">
            <div class="label">Annual Run Rate</div>
            <div class="value" id="annualRunRate">$0.00</div>
          </div>
          <div class="summary-item">
            <div class="label">Live Cost</div>
            <div class="value live" id="liveCost">$0.00</div>
          </div>
        </div>
        <p class="rate-note" id="rateNote"></p>
        <div class="breakdown" id="breakdown"></div>
        <div class="timer-row">
          <div class="summary-actions">
            <button class="btn ghost" id="copyBtn">Copy Summary</button>
            <button class="btn ghost teams" id="copyTeamsBtn">üìã Copy for Teams</button>
          </div>
        </div>
      </div>

      <div class="card ticker-card">
        <h2>Real-time Cost Ticker</h2>
        <div id="ticker" class="ticker"></div>
        <div class="ticker-actions">
          <div class="timer" id="timer">00:00</div>
          <button class="btn danger hidden" id="stopBtn">Stop Meeting</button>
        </div>
        <p class="muted">The ticker updates live as the meeting runs.</p>
      </div>

      <div class="card">
        <h2>Weekly Meeting Cost Breakdown</h2>
        <div id="donut"></div>
      </div>

      <div class="card">
        <h2>Cost Trend</h2>
        <div id="sparkline"></div>
      </div>
      </section>
      <div class="data-source">
        üíº Salary data from <a href="https://www.levels.fyi/companies/microsoft/salaries" target="_blank" rel="noopener">Levels.fyi</a> (Microsoft, US-based, total compensation including base, stock, and bonus)
      </div>
    </div> <!-- End view-calculator -->

    <!-- View: Meeting ROI Analyzer -->
    <div id="view-roi" class="view hidden">
      <section class="roi-layout">
        <!-- Input Section -->
        <div class="roi-inputs">
          <div class="card">
            <div class="roi-input-header">
              <span class="roi-step">1</span>
              <div>
                <h3>Before the Meeting</h3>
                <p class="muted">Paste the calendar invite or agenda</p>
              </div>
            </div>
            <textarea id="roiAgendaInput" rows="6" placeholder="Subject: Weekly Sync&#10;Attendees: John, Sarah, Mike&#10;Agenda:&#10;- Review last week's progress&#10;- Discuss blockers&#10;- Plan next steps"></textarea>
            <div class="quick-check-row">
              <button class="btn small ghost" id="quickCheckBtn">Quick Check</button>
              <span class="quick-check-result" id="quickCheckResult"></span>
            </div>
          </div>

          <div class="card">
            <div class="roi-input-header">
              <span class="roi-step">2</span>
              <div>
                <h3>After the Meeting</h3>
                <p class="muted">Paste notes, transcript, or summary</p>
              </div>
            </div>
            <textarea id="roiNotesInput" rows="6" placeholder="Meeting notes:&#10;- Discussed Q1 roadmap&#10;- John to send proposal by Friday&#10;- Sarah will review budget&#10;- Decided to postpone feature X&#10;- Next sync scheduled for Tuesday"></textarea>
          </div>

          <div class="card roi-cost-card">
            <div class="roi-input-header">
              <span class="roi-step">3</span>
              <div>
                <h3>Meeting Cost</h3>
                <p class="muted">From calculator or manually</p>
              </div>
            </div>
            <div class="roi-cost-input">
              <span class="roi-cost-currency">$</span>
              <input type="number" id="roiCostInput" value="0" min="0" step="50" />
              <button class="btn small" id="pullFromCalc">Pull</button>
            </div>
          </div>
        </div>

        <div class="roi-analyze-row">
          <button class="btn primary roi-analyze-btn" id="analyzeRoiBtn">
            <span class="btn-text">Analyze Meeting ROI</span>
            <span class="btn-loading hidden">Analyzing...</span>
          </button>
        </div>

        <!-- Results Section -->
        <div class="roi-results hidden" id="roiResults">
          <!-- Top row: Verdict + Metrics -->
          <div class="roi-results-top">
            <div class="roi-verdict-card">
              <span class="roi-verdict-icon" id="roiVerdictIcon">üìä</span>
              <div class="roi-verdict-text" id="roiVerdictText">Analyzing...</div>
              <div class="roi-verdict-subtext" id="roiVerdictSubtext"></div>
            </div>

            <div class="roi-metrics-compact">
              <div class="roi-metric-row">
                <span class="roi-metric-label">Clarity</span>
                <div class="roi-metric-bar"><div class="roi-metric-fill" id="roiClarityBar"></div></div>
                <span class="roi-metric-value" id="roiClarity">--</span>
              </div>
              <div class="roi-metric-row">
                <span class="roi-metric-label">On-Topic</span>
                <div class="roi-metric-bar"><div class="roi-metric-fill" id="roiOnTopicBar"></div></div>
                <span class="roi-metric-value" id="roiOnTopic">--</span>
              </div>
              <div class="roi-metric-nums">
                <div><strong id="roiActionCount">--</strong> Actions</div>
                <div><strong id="roiDecisionCount">--</strong> Decisions</div>
                <div><strong id="roiCostPerAction">--</strong>/action</div>
                <div><strong id="roiCostPerDecision">--</strong>/decision</div>
              </div>
            </div>
          </div>

          <!-- Bottom row: Details in columns -->
          <div class="roi-results-bottom">
            <div class="roi-detail-col">
              <h4>Action Items</h4>
              <ul class="roi-action-list" id="roiActionList">
                <li class="roi-action-empty">No action items detected</li>
              </ul>
            </div>

            <div class="roi-detail-col">
              <h4>Decisions</h4>
              <ul class="roi-decision-list" id="roiDecisionList">
                <li class="roi-decision-empty">No decisions detected</li>
              </ul>
            </div>

            <div class="roi-detail-col">
              <h4>Recommendations</h4>
              <ul class="roi-rec-list" id="roiRecList">
                <li>Run analysis first</li>
              </ul>
              <div class="roi-wasted-section hidden" id="roiWastedCard">
                <h4>Off-Topic</h4>
                <ul class="roi-wasted-list" id="roiWastedList"></ul>
              </div>
            </div>
          </div>

          <div class="roi-actions">
            <button class="btn small ghost" id="copyRoiReport">Copy Report</button>
            <button class="btn small ghost teams" id="shareRoiTeams">Share to Teams</button>
          </div>
        </div>
      </section>
    </div>
  </div>

  <div class="modal-overlay" id="summaryModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="summaryTitle">
      <div class="modal-header">
        <h2 id="summaryTitle">Meeting Complete! üéâ</h2>
        <p class="muted">Here‚Äôs the damage report.</p>
      </div>
      <div class="modal-stats">
        <div class="stat">
          <span class="label">Duration</span>
          <span class="value" id="summaryDuration">0 minutes</span>
        </div>
        <div class="stat">
          <span class="label">Attendees</span>
          <span class="value" id="summaryAttendees">0 people</span>
        </div>
        <div class="stat">
          <span class="label">Total Cost</span>
          <span class="value" id="summaryCost">$0.00</span>
        </div>
      </div>
      <div class="modal-section">
        <h3>What you could buy instead</h3>
        <ul id="summaryAlternatives" class="alternatives"></ul>
      </div>
      <div class="modal-section fun-fact" id="summaryFact"></div>
      <div class="modal-actions">
        <button class="btn primary" id="saveMeetingBtn">Save to Weekly Log</button>
        <button class="btn" id="dismissModalBtn">Dismiss</button>
      </div>
    </div>
  </div>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="js/data.js"></script>
  <script src="js/calculator.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/ai.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
<!-- force rebuild -->
